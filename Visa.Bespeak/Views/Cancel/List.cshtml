@model IEnumerable<Visa.Domain.ApplyView>
@{
    Layout = null;
}


<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>取消预约</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link href="~/layui/css/layui.css" rel="stylesheet" />
    <meta name="format-detection" content="telephone=no">
    <link rel="stylesheet" href="/css/global.css" media="all">
    <script src="~/js/jquery-1.10.2.js"></script>
    <script src="~/layer/layer.js"></script>
    <script>
        function checkcancel()
        {
            var qxid = "";
            $("input[name='checkboxapply']:checked").each(function () {
                qxid += $(this).val() + ",";
            });
            if (qxid == "")
            {
                layer.alert("至少选择一个要取消的记录！", function (index) {
                    layer.close(index);
                });
                return false;
            }
            layer.confirm('确定要取消所选择记录吗？', function (index)
            {
                var layerid = layer.msg('验证中...', { icon: 16, time: 0, shade: [0.6, '#000', true] });
                $.ajax({
                    type: 'POST',
                    url: '/Cancel/Delete',
                    data: { qxid: qxid },
                    dataType: 'json',
                    success: function (data) {
                        layer.close(layerid)
                        if (data.status == "1")
                        {
                            var qxids = qxid.split(",");
                            for (var i = 0; i < qxids.length; i++)
                            {
                                $("#tr_" + qxids[i]).remove();
                            }
                        }
                        else
                            layer.msg(data.message, { time: 2000 });
                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        layer.close(layerid)
                    }
                });
            });
        }
    </script>
</head>
<body>
    <div class="layui-layout layui-layout-admin">
        @Html.Partial("_PartialHeader")
        <div class="layui-body">
            <!-- 内容主体区域 -->
            <div style="padding: 15px;">
                <h6>申请人列表</h6>
                <span class="layui-breadcrumb"> <a><cite>取消预约</cite></a> </span>
                <p style="text-align:right;"></p>
                <h3 class="changeword">如您想为多名申请人打印整合的预约信，请选择与每位申请人相对应的选项，或是每次选择一项来生成每个人的预约信。</h3>
                <div class="layui-table-body layui-table-main">
                    <table class="layui-table">
                      
                        <thead>
                            <tr>
                                <th>选择</th>
                                <th>名</th>
                                <th>姓</th>
                                <th>电话号码</th>
                                <th>护照号码</th>
                                <th>预约序号</th>
                                <th>Transaction Id</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model)
                            {
                                <tr id="tr_@item.Id">
                                    <td><input type="checkbox" name="checkboxapply" value="@item.Id"></td>
                                    <td>@item.Givename</td>
                                    <td>@item.Surname</td>
                                    <td>@item.Cellphone</td>
                                    <td>@item.Passport</td>
                                    <td>@item.ApplyNumber</td>
                                    <td>@item.TransactionId</td>
                                </tr>

                            }
                          
                        </tbody>
                    </table>
                </div>
                <br><br>
                <div >
                    <a href="javascript:checkcancel()" class="layui-btn layui-btn-big">取消预约</a>
                </div>
            </div>
        </div>
        @Html.Partial("_PartialFooter")
    </div>
   
</body>
</html>
