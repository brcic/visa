@model IEnumerable<Visa.Domain.VisaType>
<script src="/layer/layer.js"></script>
<script type="text/javascript">
    function checkdel(id) {

        layer.confirm('确实要删除吗？', function () {
            var layerid = layer.msg('验证中...', { icon: 16, time: 0, shade: [0.6, '#000', true] });
            $.ajax({
                type: 'POST',
                url: '/Visa/Delete',
                data: { id: id },
                dataType: 'json',
                success: function (data) {
                    layer.closeAll();
                    if (data.status == "1")
                        window.location.reload();
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    layer.closeAll();
                    if (XMLHttpRequest.status == "499")
                        layer.msg("你没有权限,请联系管理员！", { time: 3000 });
                    else
                        layer.msg("保存失败！" + textStatus, { time: 3000 });
                }
            });
        });
    }

    function checkfind() {
        var url = "/Visa/List?s=pf";
        var country = $("#SelectCountry").val();
        if (country != "")
            url += "&country=" + country;
       
        window.location.href = url;
    }
    $(function () {
        $(document).keypress(function (event) {
            var keycode = (event.keyCode ? event.keyCode : event.which);
            if (keycode == '13') { checkfind(); }
        });
    });
</script>
<!-- #section:basics/content.breadcrumbs -->
<div class="breadcrumbs" id="breadcrumbs">
    <script type="text/javascript">
        try { ace.settings.check('breadcrumbs', 'fixed') } catch (e) { }
    </script>

    <ul class="breadcrumb">
        <li>
            <i class="ace-icon fa fa-home home-icon"></i>
            <a href="###">签证管理</a>
        </li>
        <li>
            签证种类
        </li>
    </ul><!-- /.breadcrumb -->
</div>
<!-- /section:basics/content.breadcrumbs -->
<div class="page-content">
    @Html.Partial("_PartialSetting")
    <div class="row">
        <div class="col-xs-12">
            <table border="0" cellspacing="0" cellpadding="0" class="table table-bordered">
                <tbody>
                    <tr>
                        <td class="active right">
                          选择国家
                        </td>
                        <td >
                            @Html.DropDownList("SelectCountry", ViewData["vcountry"] as List<SelectListItem>)
                        </td>
                        <td>
                            <a class="btn btn-sm btn-pink" href="javascript:checkfind()" aria-label="Left Align">
                                <i class="fa fa-rearch bigger-120"></i>查询
                            </a>
                            <a class="btn btn-sm btn-pink" href="/Visa/Add" aria-label="Left Align">
                                <i class="fa fa-plus bigger-120"></i>添加
                            </a>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table id="simple-table" class="table table-striped table-bordered table-hover">
                <thead>
                    <tr>
                        <th>序号</th>
                        <th>签证类型</th>
                        <th>英文名</th>
                        <th>操作</th>
                    </tr>
                </thead>
          
                <tbody>
                    @foreach (var item in Model)
                    {
                        <tr id="tr_@item.Id">
                            <td>@item.Id</td>
                            <td>@item.TypeName</td>
                            <td>@item.EngName</td>
                            <td>
                                <div class="hidden-sm hidden-xs btn-group">
                                    <a href="/Visa/Edit/@item.Id" class="btn btn-xs btn-info">
                                        <i class="ace-icon fa fa-pencil bigger-120"></i>编辑
                                    </a>
                                    <a href="javascript:checkdel(@item.Id)" class="btn btn-xs btn-info">
                                        <i class="ace-icon fa fa-trash-o bigger-120"></i>删除
                                    </a>
                                    <a href="/Visa/FormList?vid=@item.Id&country=@item.RegionCode" class="btn btn-xs btn-info">
                                        <i class="ace-icon fa fa-file bigger-120"></i>上传材料
                                    </a>
                                    <a href="/Visa/EntryList?vid=@item.Id&country=@item.RegionCode" class="btn btn-xs btn-info">
                                        <i class="ace-icon fa fa-file bigger-120"></i>设置入境次数
                                    </a>
                                </div>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
            @Html.Raw(ViewData["PageHtml"])
        </div>
    </div>
</div>
